import"../chunks/CWj6FrbW.js";import{aA as $e,ab as Re,aB as k,c as J,aC as fe,ac as P,aD as Qe,ae as x,af as Ue,s,a as e,aE as Ve,ah as c,ai as u,ag as p,aq as ue,ar as R,as as K,aF as me,aG as L}from"../chunks/BUABgXT9.js";import{i as O}from"../chunks/DPye3u9j.js";import{e as he,i as pe}from"../chunks/BfxQ0h2K.js";import{s as q}from"../chunks/CfiIr2m6.js";import{s as ge}from"../chunks/C3avk3QO.js";import"../chunks/DaK1FUv-.js";const Y={glyphs:[{uuid:"g1",glyphIds:["torus-flow"],userId:"u1",type:"solo"},{uuid:"g2",glyphIds:["spiral-ascent"],userId:"u2",type:"solo"},{uuid:"g3",glyphIds:["circle-unity"],userId:"u3",type:"solo"},{uuid:"g4",glyphIds:["triangle-balance"],userId:"u4",type:"solo"},{uuid:"g5",glyphIds:["mandala-reflection"],userId:"u5",type:"solo"},{uuid:"g6",glyphIds:["lotus-awakening"],userId:"u6",type:"solo"},{uuid:"g7",glyphIds:["torus-flow","spiral-ascent"],userId:"u7",type:"pair"},{uuid:"g8",glyphIds:["circle-unity","triangle-balance"],userId:"u8",type:"pair"},{uuid:"g9",glyphIds:["mandala-reflection"],userId:"u9",type:"solo"},{uuid:"g10",glyphIds:["lotus-awakening"],userId:"u10",type:"solo"},{uuid:"g11",glyphIds:["spiral-ascent"],userId:"u11",type:"solo"},{uuid:"g12",glyphIds:["circle-unity"],userId:"u12",type:"solo"},{uuid:"g13",glyphIds:["triangle-balance"],userId:"u13",type:"solo"},{uuid:"g14",glyphIds:["mandala-reflection"],userId:"u14",type:"solo"},{uuid:"g15",glyphIds:["torus-flow"],userId:"u15",type:"solo"}],corridors:[{id:"c1",type:"individual",glyphs:["g1"],opacity:0,intensity:0},{id:"c2",type:"group",glyphs:["g2","g3","g4"],coherenceEventId:"e1",opacity:0,intensity:0},{id:"c3",type:"group",glyphs:["g5","g6","g7"],coherenceEventId:"e1",opacity:0,intensity:0},{id:"c4",type:"individual",glyphs:["g8"],opacity:0,intensity:0},{id:"c5",type:"group",glyphs:["g9","g10","g11","g12"],coherenceEventId:"e2",opacity:0,intensity:0},{id:"c6",type:"group",glyphs:["g13","g14","g15"],opacity:0,intensity:0}],coherenceEvents:[{id:"e2",type:"healing",corridors:["c5"],strength:4}]},ye={"torus-flow":{archetype:"Renewal",geometry:"torus",color:"#1e40af",frequency:396},"spiral-ascent":{archetype:"Growth",geometry:"spiral",color:"#7c3aed",frequency:432},"circle-unity":{archetype:"Wholeness",geometry:"circle",color:"#166534",frequency:528},"triangle-balance":{archetype:"Harmony",geometry:"triangle",color:"#d97706",frequency:639},"mandala-reflection":{archetype:"Integration",geometry:"mandala",color:"#64748b",frequency:741},"lotus-awakening":{archetype:"Compassion",geometry:"lotus",color:"#7c3aed",frequency:852}};async function We(Q,w,I,z,M,r,E,n,B,F,S,X,U){if(!(e(w)||e(I)===null)){if(s(w,!0),s(z,!1),e(M).clear(),s(r,!1),E(),s(n,"queueing"),await B(),e(z))return F();if(e(M).add("queueing"),s(n,"formation"),await S(),e(M).add("formation"),(e(z)||e(I)===1)&&await disolve(),s(n,"coherence"),await X(),e(z)){s(n,"dissolving"),await U(22e3),s(w,!1),s(z,!1);return}s(n,"dissolving"),await U(22e3),s(w,!1),s(n,"")}}async function je(Q,w,I,z,M){e(w)&&(s(I,!0),await z(),e(M).forEach(r=>{r.opacity=0,r.scale=.5}))}var Je=(Q,w)=>s(w,1),Ke=(Q,w)=>s(w,2),Ze=(Q,w)=>s(w,3),et=P('<div class="field-header svelte-1ud76ro"><h1 class="svelte-1ud76ro">Harmonia Exploration</h1> <p class="phase-indicator svelte-1ud76ro">Choose your journey into the Coherence Field</p></div> <div class="scenario-selection svelte-1ud76ro"><div class="scenario-grid svelte-1ud76ro"><button class="scenario-card svelte-1ud76ro"><div class="scenario-icon svelte-1ud76ro">üîÆ</div> <h3 class="svelte-1ud76ro">Only Glyphs</h3></button> <button class="scenario-card svelte-1ud76ro"><div class="scenario-icon svelte-1ud76ro">üåÄ</div> <h3 class="svelte-1ud76ro">Corridors & Glyphs</h3></button> <button class="scenario-card svelte-1ud76ro"><div class="scenario-icon svelte-1ud76ro">‚ú®</div> <h3 class="svelte-1ud76ro">Coherence Event</h3></button></div></div>',1),tt=P('<p class="phase-indicator svelte-1ud76ro"> </p>'),at=P('<div class="feedback-item dissolving-message svelte-1ud76ro"><span class="feedback-value svelte-1ud76ro">Structures dissolving back into the field...</span></div>'),st=P('<div class="feedback-item svelte-1ud76ro"><span class="feedback-label svelte-1ud76ro">Glyphs Active:</span> <span class="feedback-value svelte-1ud76ro"> </span></div>'),rt=P('<div class="feedback-item svelte-1ud76ro"><span class="feedback-label svelte-1ud76ro">Corridors Formed:</span> <span class="feedback-value svelte-1ud76ro"> </span></div>'),ot=P('<div class="feedback-item svelte-1ud76ro"><span class="feedback-label svelte-1ud76ro">Coherence Events:</span> <span class="feedback-value svelte-1ud76ro"> </span></div>'),it=P('<div class="feedback-item svelte-1ud76ro"><span class="feedback-label svelte-1ud76ro">Trace Artifact:</span> <span class="feedback-value svelte-1ud76ro">Created</span></div>'),nt=P("<!> <!> <!> <!>",1),lt=me('<g class="svelte-1ud76ro"><circle filter="url(#glow-soft)" class="glyph-geometry svelte-1ud76ro"></circle><text text-anchor="middle" dominant-baseline="central" font-size="16" fill="white" filter="url(#glow-soft)" class="svelte-1ud76ro"> </text></g>'),ct=me('<g class="glyph svelte-1ud76ro"><circle r="30" fill="rgba(255, 255, 255, 0.1)" stroke="rgba(255, 255, 255, 0.3)" stroke-width="1" filter="url(#glow-soft)" class="glyph-boundary svelte-1ud76ro"></circle><!></g>'),ut=P('<button class="viz-begin-button svelte-1ud76ro">‚èπÔ∏è Stop Ritual</button>'),dt=P('<button class="viz-begin-button svelte-1ud76ro">Begin Coherence Ritual</button>'),vt=P('<div class="field-header svelte-1ud76ro"><h1 class="svelte-1ud76ro">Coherence Field</h1> <!></div> <div class="field-grid svelte-1ud76ro"><div class="feedback-panel svelte-1ud76ro"><h3 class="svelte-1ud76ro">Resonance Feedback</h3> <div class="feedback-content svelte-1ud76ro"><!></div></div> <div class="visualization-container svelte-1ud76ro"><div class="viz-content svelte-1ud76ro"><svg class="field-canvas svelte-1ud76ro"><defs class="svelte-1ud76ro"><radialGradient id="fieldGradient" cx="50%" cy="50%" r="50%" class="svelte-1ud76ro"><stop offset="0%" style="stop-color:#4c1d95;stop-opacity:0.3" class="svelte-1ud76ro"></stop><stop offset="100%" style="stop-color:#1e1b4b;stop-opacity:0.8" class="svelte-1ud76ro"></stop></radialGradient><filter id="glow-soft" class="svelte-1ud76ro"><feGaussianBlur stdDeviation="3" result="coloredBlur" class="svelte-1ud76ro"></feGaussianBlur><feMerge class="svelte-1ud76ro"><feMergeNode in="coloredBlur" class="svelte-1ud76ro"></feMergeNode><feMergeNode in="SourceGraphic" class="svelte-1ud76ro"></feMergeNode></feMerge></filter><filter id="glow-intense" class="svelte-1ud76ro"><feGaussianBlur stdDeviation="6" result="coloredBlur" class="svelte-1ud76ro"></feGaussianBlur><feMerge class="svelte-1ud76ro"><feMergeNode in="coloredBlur" class="svelte-1ud76ro"></feMergeNode><feMergeNode in="SourceGraphic" class="svelte-1ud76ro"></feMergeNode></feMerge></filter></defs><rect width="100%" height="100%" fill="url(#fieldGradient)" class="svelte-1ud76ro"></rect><!></svg> <div class="viz-actions svelte-1ud76ro"><!></div></div></div></div>',1),ft=P('<div class="coherence-field svelte-1ud76ro"><!></div>');function wt(Q,w){Re(w,!0);let I=k(null),z=k(!1),M=k(""),r=k(J([])),E=k(J([])),n=k(J([])),B=k(J([])),F=k(!1),S=k(!1),X=k(0),U=k(!1),$=k(J(new Set)),_e=20,Z=k(800),oe=k(800);fe(()=>{const t=()=>{const a=document.querySelector(".visualization-container");if(a){const o=a.getBoundingClientRect();s(Z,Math.floor(o.width*.9),!0),s(oe,Math.floor(o.height*.9),!0)}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),fe(()=>{be()});function be(){const t=Y.glyphs.length,o=Math.ceil(Math.sqrt(t)),l=e(Z)/o,h=(i,g)=>{const _=i*l+l/2,d=g*l+l/2;return{x:_,y:d}};s(r,Y.glyphs.map((i,g)=>{const _=g%o,d=Math.floor(g/o),T=["inhale","exhale","pause"],A=["slow","steady","fast"],{x:C,y:D}=h(_,d);return{...i,x:C,y:D,originalX:C,originalY:D,opacity:0,scale:.5,pulsePhase:Math.random()*Math.PI*2,phase:{breath:T[Math.floor(Math.random()*T.length)],tempo:A[Math.floor(Math.random()*A.length)]}}}),!0)}function we(t){switch(t){case"slow":return 5e3;case"steady":return 3e3;case"fast":return 1500;default:return 3e3}}function Ie(t,a){switch(t){case"inhale":return 1+Math.sin(a*Math.PI)*.2;case"exhale":return 1-Math.sin(a*Math.PI)*.15;case"pause":return 1+Math.sin(a*Math.PI*2)*.1;default:return 1}}function Me(t,a){switch(t){case"inhale":return .8+Math.sin(a*Math.PI)*.2;case"exhale":return .9+Math.sin(a*Math.PI)*.3;case"pause":return .85+Math.sin(a*Math.PI*2)*.15;default:return .8}}function ke(t){return Math.max(.5,Math.min(2,t/500))}async function xe(){e(F)&&(s(M,"dissolving"),await ie(3e3),s(F,!1),s(M,""),s(z,!1),s(E,[],!0),s(n,[],!0),s(B,[],!0),e($).clear(),s(X,0),s(U,!1),s(B,[],!0))}function Ee(){s(E,[],!0),s(n,[],!0),s(B,[],!0),e(r).forEach(t=>{t.opacity=0,t.scale=.8}),(e(I)??0)>=2&&Y.corridors.forEach(t=>{t.opacity=0,t.intensity=0}),(e(I)??0)>=3&&Y.coherenceEvents.forEach(t=>{t.opacity=0})}function Pe(){return s(M,"dissolving"),s($,new Set,!0),ie(22e3).finally(()=>{s(F,!1),s(S,!1)})}async function Ce(){console.log("Starting Queueing phase - faint, random motion, slow moving...");for(let a=0;a<e(r).length&&!e(S);a++){s(E,[...e(E),a],!0);const o=e(r)[a];if(o.opacity=.3,o.scale=.8,setTimeout(()=>{o.opacity=.6,o.scale=1,s(r,[...e(r)],!0)},100),await new Promise(l=>setTimeout(l,1200)),e(S))break}const t=setInterval(()=>{if(e(S)){clearInterval(t);return}e(r).forEach(a=>{a.x+=(Math.random()-.5)*2,a.y+=(Math.random()-.5)*2,de(a)}),s(r,[...e(r)],!0)},200);await new Promise(a=>setTimeout(a,5e3)),clearInterval(t)}async function Ge(){console.log("Starting Formation phase - glyphs move to form corridors...");for(let t=0;t<Y.corridors.length&&!e(S);t++){const a=Y.corridors[t];for(let o of a.glyphs)e(r).findIndex(l=>l.uuid===o);if(a.opacity=0,a.intensity=0,s(n,[...e(n),a],!0),setTimeout(()=>{a.opacity=.7,a.intensity=1,s(n,[...e(n)],!0)},1500),await new Promise(o=>setTimeout(o,2e3)),e(S))break}await new Promise(t=>setTimeout(t,5e3))}async function Se(){console.log("Starting Coherence phase - stable, luminous, corridors move in synchrony..."),s(X,100),(e(I)??0)>=2?(e(n).forEach((t,a)=>{t.intensity=2,t.opacity=1,t.pulsePhase=a*(Math.PI/4)}),(e(I)??0)>=3&&Y.coherenceEvents.forEach(a=>{a.opacity=.8,s(B,[...e(B),a],!0)}),s(n,[...e(n)],!0),s(r,[...e(r)],!0),await new Promise(t=>setTimeout(t,1e4))):(e(r).forEach(t=>{t.opacity=1,t.pulseIntensity=1.2}),s(r,[...e(r)],!0),await new Promise(t=>setTimeout(t,1e4)))}async function ie(t=22e3){console.log("Starting Dissolving phase - glow fades, components scatter outward..."),s(M,"dissolving");const a=Date.now();e(X);for(const o of Y.coherenceEvents){if(Date.now()-a>t)break;const l=e(n).filter(h=>h.coherenceEventId===o.id);if(l.length>0){const h=setInterval(()=>{if(Date.now()-a>t){clearInterval(h);return}l.forEach(i=>{i.glyphs.forEach(g=>{const _=e(r).findIndex(d=>d.uuid===g);if(_!==-1){const d=e(r)[_];d.orbitSpeed=(d.orbitSpeed??0)*.95}})}),s(r,[...e(r)],!0)},100);await new Promise(i=>setTimeout(i,3e3)),clearInterval(h),l.forEach(i=>{i.opacity*=.5,i.intensity*=.5}),s(n,[...e(n)],!0),await new Promise(i=>setTimeout(i,2e3)),l.forEach(i=>{i.glyphs.forEach(g=>{const _=e(r).findIndex(d=>d.uuid===g);if(_!==-1){const d=e(r)[_],T=Math.random()*Math.PI*2,A=100+Math.random()*200,C=d.x+Math.cos(T)*A,D=d.y+Math.sin(T)*A;Te(d,C,D,4e3),setTimeout(()=>{d.opacity*=.3,d.scale*=.7,s(r,[...e(r)],!0)},2e3)}})}),await new Promise(i=>setTimeout(i,5e3))}}for(let o=e(n).length-1;o>=0&&!(Date.now()-a>t);o--)e(n).splice(o,1),s(n,[...e(n)],!0),await new Promise(l=>setTimeout(l,500));for(let o=e(E).length-1;o>=0&&!(Date.now()-a>t);o--){const l=e(E)[o],h=e(r)[l];h.opacity=0,h.scale=.3,s(r,[...e(r)],!0),e(E).splice(o,1),s(E,[...e(E)],!0),await new Promise(i=>setTimeout(i,300))}console.log("Dissolving phase complete.")}function de(t){const a=(t.radius||_e)*2;t.x=Math.max(a,Math.min(e(Z)-a,t.x)),t.y=Math.max(a,Math.min(e(oe)-a,t.y))}function Te(t,a,o,l){const h=t.x,i=t.y,g=Date.now(),_=e(X),d=l;function T(){const A=Date.now()-g,C=Math.min(A/d,1);s(X,Math.max(0,_-_*C),!0);const D=1-Math.pow(1-C,3);t.x=h+(a-h)*D,t.y=i+(o-i)*D,de(t),s(r,[...e(r)],!0),C<1&&requestAnimationFrame(T)}requestAnimationFrame(T)}function De(t){const a=ye[t];if(!a)return"‚≠ï";switch(a.geometry){case"torus":return"üç©";case"spiral":return"üåÄ";case"circle":return"‚≠ï";case"triangle":return"üî∫";case"mandala":return"üï∏Ô∏è";case"lotus":return"ü™∑";default:return"‚≠ï"}}function ze(t){switch(t){case"queueing":return"User symbolic signatures added to field";case"formation":return"Groups forming based on signatures";case"coherence":return"Coherence event for group sizes that reach coherence threshold";case"dissolving":return"Event closing";case"":return"";default:return t}}var ne=ft();Qe(t=>{Ve.title="Coherence Field - Harmonia"});var Ae=c(ne);{var qe=t=>{var a=et(),o=p(ue(a),2),l=c(o),h=c(l);h.__click=[Je,I];var i=p(h,2);i.__click=[Ke,I];var g=p(i,2);g.__click=[Ze,I],u(l),u(o),x(t,a)},Be=t=>{var a=vt(),o=ue(a),l=p(c(o),2);{var h=v=>{var y=tt(),b=c(y);u(y),R(W=>K(b,`Phase: ${W??""}`),[()=>ze(e(M))]),x(v,y)};O(l,v=>{e(M)&&v(h)})}u(o);var i=p(o,2),g=c(i),_=p(c(g),2),d=c(_);{var T=v=>{var y=at();x(v,y)},A=v=>{var y=nt(),b=ue(y);{var W=f=>{var m=st(),G=p(c(m),2),H=c(G,!0);u(G),u(m),R(()=>K(H,e(E).length)),x(f,m)};O(b,f=>{e($).has("queueing")&&f(W)})}var N=p(b,2);{var le=f=>{var m=rt(),G=p(c(m),2),H=c(G,!0);u(G),u(m),R(()=>K(H,e(n).length)),x(f,m)};O(N,f=>{e($).has("formation")&&f(le)})}var ee=p(N,2);{var te=f=>{var m=ot(),G=p(c(m),2),H=c(G,!0);u(G),u(m),R(()=>K(H,e(B).length)),x(f,m)};O(ee,f=>{e($).has("coherence")&&f(te)})}var ce=p(ee,2);{var ae=f=>{var m=it();x(f,m)};O(ce,f=>{e($).has("emergence")&&f(ae)})}x(v,y)};O(d,v=>{e(M)==="dissolving"?v(T):v(A,!1)})}u(_),u(g);var C=p(g,2),D=c(C),V=c(D),Fe=p(c(V),2);he(Fe,17,()=>e(E),pe,(v,y)=>{const b=L(()=>e(r)[e(y)]),W=L(()=>Date.now());var N=ct(),le=p(c(N));he(le,17,()=>e(b).glyphIds,pe,(ee,te,ce)=>{const ae=L(()=>ye[e(te)]),f=L(()=>we(e(b).phase.tempo)),m=L(()=>(e(W)+e(b).pulsePhase*1e3)%e(f)/e(f)),G=L(()=>Ie(e(b).phase.breath,e(m))),H=L(()=>Me(e(b).phase.breath,e(m))),Oe=L(()=>ke(e(ae).frequency));var se=lt(),j=c(se),re=p(j),Ye=c(re,!0);u(re),u(se),R(Xe=>{q(se,"transform",`translate(${e(b).type==="pair"?ce===0?-12:12:0}, 0)`),q(j,"r",18*e(G)),q(j,"fill",e(ae).color),q(j,"opacity",e(H)),ge(j,`animation: shimmer ${3/e(Oe)}s ease-in-out infinite;`),q(re,"opacity",e(H)),ge(re,`transform: scale(${e(G)??""})`),K(Ye,Xe)},[()=>De(e(te))]),x(ee,se)}),u(N),R(()=>{q(N,"transform",`translate(${e(b).x??""}, ${e(b).y??""}) scale(${e(b).scale??""})`),q(N,"opacity",e(b).opacity)}),x(v,N)}),u(V);var ve=p(V,2),Ne=c(ve);{var He=v=>{var y=ut();y.__click=[je,F,S,xe,r],x(v,y)},Le=v=>{var y=dt();y.__click=[We,F,I,S,$,U,Ee,M,Ce,Pe,Ge,Se,ie],x(v,y)};O(Ne,v=>{e(F)?v(He):v(Le,!1)})}u(ve),u(D),u(C),u(i),R(()=>{q(V,"width",e(Z)),q(V,"height",e(oe))}),x(t,a)};O(Ae,t=>{e(I)===null?t(qe):t(Be,!1)})}u(ne),x(Q,ne),Ue()}$e(["click"]);export{wt as component};
